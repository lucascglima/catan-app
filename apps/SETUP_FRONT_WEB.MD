# Catan MVP - Setup e Configura√ß√£o Front-End

## üìã Informa√ß√µes do Projeto

**Nome:** @catan-mvp/web  
**Vers√£o:** 1.0.0  
**Framework:** Next.js 15.1.3  
**React:** 19.0.0  
**TypeScript:** 5.7.2  
**Estiliza√ß√£o:** Tailwind CSS 4.0.0

---

## üéØ Princ√≠pios de Design e Desenvolvimento

### Filosofia do Projeto
1. **UX/UI em Primeiro Lugar**: Cada componente deve priorizar clareza e intuitividade
2. **Fidelidade √†s Regras**: Sistema deve prevenir a√ß√µes inv√°lidas
3. **Feedback Visual Imediato**: Toda a√ß√£o gera resposta visual instant√¢nea
4. **Performance**: Otimizar renderiza√ß√µes e anima√ß√µes

### Stack Tecnol√≥gica Escolhida

#### Core
- **Next.js 15**: Framework React com SSR e App Router
- **React 19**: Biblioteca UI com novos recursos de concorr√™ncia
- **TypeScript**: Type safety em todo o c√≥digo

#### UI/UX
- **Tailwind CSS 4.0**: Utility-first CSS framework
- **Radix UI**: Componentes acess√≠veis e sem estilo
  - Dialog (Modais)
  - Dropdown Menu (Menus contextuais)
  - Tooltip (Dicas visuais)
  - Avatar (Indicadores de jogadores)

#### State Management & Real-time
- **Socket.io Client**: Comunica√ß√£o real-time para multiplayer
- **Supabase**: Backend as a Service (autentica√ß√£o e banco de dados)

#### Valida√ß√£o e Utilities
- **Zod**: Schema validation
- **clsx + tailwind-merge**: Gerenciamento din√¢mico de classes CSS

#### Workspace
- **@catan-mvp/types**: Tipos compartilhados
- **@catan-mvp/game-engine**: L√≥gica do jogo

---

## üóÇÔ∏è Estrutura de Pastas Recomendada

```
apps/web/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ (auth)/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ register/
‚îÇ   ‚îú‚îÄ‚îÄ (game)/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lobby/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ game/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ [gameId]/
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ layout.tsx
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx
‚îÇ   ‚îî‚îÄ‚îÄ globals.css
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ui/                      # Componentes base (Radix UI wrappers)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ button.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dialog.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dropdown-menu.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tooltip.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ avatar.tsx
‚îÇ   ‚îú‚îÄ‚îÄ game/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ board/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GameBoard.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Hexagon.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Port.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Robber.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Road.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Settlement.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ City.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ player/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PlayerPanel.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ResourceCards.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DevelopmentCards.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PlayerActions.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dice/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DiceRoller.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ DiceAnimation.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ trading/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ BankTradeModal.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ construction/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConstructionMenu.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ BuildingPlacement.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ opponents/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ OpponentCard.tsx
‚îÇ   ‚îî‚îÄ‚îÄ shared/
‚îÇ       ‚îú‚îÄ‚îÄ LoadingSpinner.tsx
‚îÇ       ‚îî‚îÄ‚îÄ Toast.tsx
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useGame.ts
‚îÇ   ‚îú‚îÄ‚îÄ useSocket.ts
‚îÇ   ‚îú‚îÄ‚îÄ usePlayer.ts
‚îÇ   ‚îú‚îÄ‚îÄ useConstruction.ts
‚îÇ   ‚îî‚îÄ‚îÄ useTrading.ts
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ socket.ts
‚îÇ   ‚îú‚îÄ‚îÄ supabase.ts
‚îÇ   ‚îú‚îÄ‚îÄ utils.ts
‚îÇ   ‚îî‚îÄ‚îÄ constants.ts
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îú‚îÄ‚îÄ game.ts
‚îÇ   ‚îî‚îÄ‚îÄ player.ts
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ images/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ resources/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ wood.svg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ brick.svg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sheep.svg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ wheat.svg
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ore.svg
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hexagons/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ forest.svg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hills.svg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pasture.svg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fields.svg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mountains.svg
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ desert.svg
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dice/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ dice-1.svg
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ sounds/
‚îÇ       ‚îú‚îÄ‚îÄ dice-roll.mp3
‚îÇ       ‚îî‚îÄ‚îÄ resource-gain.mp3
‚îú‚îÄ‚îÄ styles/
‚îÇ   ‚îî‚îÄ‚îÄ animations.css
‚îî‚îÄ‚îÄ tailwind.config.ts
```

---

## üé® Sistema de Design

### Cores do Tema

```typescript
// tailwind.config.ts
const colors = {
  // Recursos
  resource: {
    wood: '#8B4513',
    brick: '#CD5C5C',
    sheep: '#98FB98',
    wheat: '#F0E68C',
    ore: '#708090',
  },
  
  // Jogadores (4 cores padr√£o)
  player: {
    red: '#FF4444',
    blue: '#4169E1',
    white: '#FFFFFF',
    orange: '#FF8C00',
  },
  
  // UI
  ui: {
    background: '#1A1A2E',
    surface: '#16213E',
    primary: '#0F3460',
    accent: '#E94560',
    text: {
      primary: '#FFFFFF',
      secondary: '#B0B0B0',
      disabled: '#5A5A5A',
    },
  },
  
  // Estados
  state: {
    success: '#4CAF50',
    warning: '#FFC107',
    error: '#F44336',
    info: '#2196F3',
  },
  
  // N√∫meros de probabilidade
  probability: {
    high: '#FF0000', // 6 e 8
    medium: '#000000', // Outros
  },
};
```

### Tipografia

```typescript
// Hierarquia de texto
const typography = {
  h1: 'text-4xl font-bold',
  h2: 'text-3xl font-semibold',
  h3: 'text-2xl font-semibold',
  body: 'text-base',
  small: 'text-sm',
  tiny: 'text-xs',
};
```

### Espa√ßamento

```typescript
// Sistema de espa√ßamento (m√∫ltiplos de 4px)
const spacing = {
  xs: '0.25rem',  // 4px
  sm: '0.5rem',   // 8px
  md: '1rem',     // 16px
  lg: '1.5rem',   // 24px
  xl: '2rem',     // 32px
  '2xl': '3rem',  // 48px
};
```

---

## üéÆ Componentes Principais

### 1. GameBoard Component

**Responsabilidades:**
- Renderizar hex√°gonos de recursos
- Exibir n√∫meros de produ√ß√£o (6 e 8 em vermelho)
- Mostrar portos
- Renderizar estradas, povoa√ß√µes e cidades
- Gerenciar posicionamento do ladr√£o

**Props:**
```typescript
interface GameBoardProps {
  hexagons: Hexagon[];
  roads: Road[];
  settlements: Settlement[];
  cities: City[];
  robberPosition: HexPosition;
  onHexClick?: (hex: Hexagon) => void;
  buildMode?: 'road' | 'settlement' | 'city' | null;
  validPositions?: Position[];
}
```

**Estados Visuais:**
- Normal: Hex√°gonos est√°ticos
- Produ√ß√£o: Brilho/pulso nos hex√°gonos que produzem
- Modo Constru√ß√£o: Destaque de posi√ß√µes v√°lidas
- Modo Ladr√£o: Hex√°gonos clic√°veis para mover ladr√£o

---

### 2. DiceRoller Component

**Responsabilidades:**
- Bot√£o de rolar dados
- Anima√ß√£o de rolagem (1-2s)
- Exibir resultado

**Props:**
```typescript
interface DiceRollerProps {
  onRoll: () => Promise<[number, number]>;
  disabled: boolean;
  isRolling: boolean;
}
```

**Anima√ß√£o:**
```css
@keyframes dice-roll {
  0% { transform: rotate(0deg); }
  25% { transform: rotate(90deg) scale(1.1); }
  50% { transform: rotate(180deg) scale(1); }
  75% { transform: rotate(270deg) scale(1.1); }
  100% { transform: rotate(360deg) scale(1); }
}
```

---

### 3. PlayerPanel Component

**Responsabilidades:**
- Exibir cartas de recursos (agrupadas por tipo)
- Exibir cartas de desenvolvimento
- Mostrar pontos de vit√≥ria
- A√ß√µes dispon√≠veis (construir, trocar, passar vez)

**Layout:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Pontos: 5  |  ‚öîÔ∏è Cavaleiros: 2             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  RECURSOS                                   ‚îÇ
‚îÇ  ü™µ 3  üß± 2  üêë 4  üåæ 1  ‚õ∞Ô∏è 0              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  CARTAS DE DESENVOLVIMENTO (3)              ‚îÇ
‚îÇ  [Cavaleiro] [Progresso] [???]              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  A√á√ïES                                      ‚îÇ
‚îÇ  [üé≤ Rolar] [üîÑ Trocar] [üèóÔ∏è Construir]    ‚îÇ
‚îÇ  [‚û°Ô∏è Passar Vez]                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### 4. ConstructionMenu Component

**Responsabilidades:**
- Exibir op√ß√µes de constru√ß√£o
- Validar recursos dispon√≠veis
- Habilitar/desabilitar bot√µes
- Iniciar modo de posicionamento

**Estrutura:**
```typescript
interface ConstructionOption {
  type: 'road' | 'settlement' | 'city' | 'development';
  cost: ResourceCost;
  enabled: boolean;
  onClick: () => void;
}

const constructions: ConstructionOption[] = [
  {
    type: 'road',
    cost: { wood: 1, brick: 1 },
    label: 'Estrada',
    icon: 'üõ§Ô∏è',
  },
  {
    type: 'settlement',
    cost: { wood: 1, brick: 1, sheep: 1, wheat: 1 },
    label: 'Povoa√ß√£o',
    icon: 'üè†',
  },
  {
    type: 'city',
    cost: { ore: 3, wheat: 2 },
    label: 'Cidade',
    icon: 'üèõÔ∏è',
  },
];
```

**Estados do Bot√£o:**
- ‚úÖ Habilitado: Verde, clic√°vel
- ‚ùå Desabilitado: Cinza, opaco, cursor not-allowed
- Tooltip mostra recursos faltantes

---

### 5. BankTradeModal Component

**Responsabilidades:**
- Interface de troca com banco
- Sele√ß√£o de recursos (enviar/receber)
- Valida√ß√£o de taxa de c√¢mbio
- Confirma√ß√£o de troca

**Interface:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Trocar com Banco                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ENVIAR (Taxa: 4:1)                  ‚îÇ
‚îÇ  [ü™µ Wood] x4                        ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ          ‚¨áÔ∏è                          ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ  RECEBER                             ‚îÇ
‚îÇ  [üß± Brick] x1                       ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ  [Cancelar]  [Confirmar Troca]       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### 6. OpponentCard Component

**Responsabilidades:**
- Exibir informa√ß√µes dos advers√°rios
- Mostrar pontos, recursos (quantidade), cavaleiros
- Indicar turno ativo

**Layout Compacto:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üî¥ Jogador 2               ‚îÇ
‚îÇ  ‚≠ê Pontos: 4               ‚îÇ
‚îÇ  üé¥ Cartas: 7               ‚îÇ
‚îÇ  ‚öîÔ∏è Cavaleiros: 3           ‚îÇ
‚îÇ  üèÜ Maior Ex√©rcito          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîÑ Fluxo de Estados do Jogo

### M√°quina de Estados

```typescript
type GamePhase = 
  | 'WAITING_FOR_PLAYERS'
  | 'INITIAL_PLACEMENT'
  | 'ROLL_DICE'
  | 'MAIN_ACTIONS'
  | 'DISCARD_PHASE'    // Quando rolar 7 e algu√©m tem >7 cartas
  | 'MOVE_ROBBER'      // Ap√≥s rolar 7
  | 'GAME_OVER';

type TurnPhase =
  | 'MUST_ROLL'          // Deve rolar dados
  | 'ACTIONS'            // Pode construir, trocar, jogar cartas
  | 'BUILDING_PLACEMENT' // Selecionando local de constru√ß√£o
  | 'ROBBER_PLACEMENT'   // Selecionando hex√°gono para ladr√£o
  | 'STEAL_CARD';        // Escolhendo jogador para roubar
```

### Transi√ß√µes de Estado

```typescript
// Hook para gerenciar estado do jogo
const useGameState = () => {
  const [phase, setPhase] = useState<TurnPhase>('MUST_ROLL');
  
  const rollDice = async () => {
    const result = await diceRoll();
    
    if (result === 7) {
      setPhase('DISCARD_PHASE');
      // Depois -> MOVE_ROBBER
    } else {
      distributeResources(result);
      setPhase('ACTIONS');
    }
  };
  
  const startBuilding = (type: BuildingType) => {
    setPhase('BUILDING_PLACEMENT');
  };
  
  const endTurn = () => {
    setPhase('MUST_ROLL');
    // Passar vez para pr√≥ximo jogador
  };
  
  return { phase, rollDice, startBuilding, endTurn };
};
```

---

## üé≠ Sistema de Valida√ß√µes

### Valida√ß√£o de Constru√ß√£o

```typescript
const canBuild = (
  type: BuildingType,
  resources: Resources,
  boardState: BoardState,
  playerColor: PlayerColor
): ValidationResult => {
  // 1. Verificar recursos
  const hasResources = checkResources(type, resources);
  if (!hasResources) {
    return { valid: false, reason: 'Recursos insuficientes' };
  }
  
  // 2. Verificar regras de posicionamento
  switch (type) {
    case 'road':
      const validRoadPositions = getValidRoadPositions(boardState, playerColor);
      if (validRoadPositions.length === 0) {
        return { valid: false, reason: 'Sem posi√ß√µes v√°lidas para estrada' };
      }
      break;
      
    case 'settlement':
      const validSettlementPositions = getValidSettlementPositions(boardState, playerColor);
      if (validSettlementPositions.length === 0) {
        return { valid: false, reason: 'Sem posi√ß√µes v√°lidas para povoa√ß√£o' };
      }
      break;
      
    case 'city':
      const upgradeableSettlements = getUpgradeableSettlements(boardState, playerColor);
      if (upgradeableSettlements.length === 0) {
        return { valid: false, reason: 'Sem povoa√ß√µes para transformar em cidade' };
      }
      break;
  }
  
  return { valid: true };
};
```

### Valida√ß√£o de Troca

```typescript
const canTrade = (
  offer: Resources,
  request: Resources,
  playerResources: Resources,
  ports: Port[]
): ValidationResult => {
  // 1. Jogador tem os recursos para oferecer?
  const hasOffer = checkHasResources(playerResources, offer);
  if (!hasOffer) {
    return { valid: false, reason: 'Recursos insuficientes para troca' };
  }
  
  // 2. Taxa de c√¢mbio v√°lida?
  const rate = calculateTradeRate(offer, request, ports);
  const requiredAmount = getResourceAmount(offer);
  
  if (requiredAmount < rate) {
    return { valid: false, reason: `Necess√°rio ${rate} recursos para esta troca` };
  }
  
  return { valid: true };
};
```

---

## üé® Anima√ß√µes e Transi√ß√µes

### Anima√ß√µes Essenciais

```css
/* animations.css */

/* Dados rolando */
@keyframes dice-roll {
  0%, 100% { transform: rotate(0deg) translateY(0); }
  25% { transform: rotate(90deg) translateY(-10px); }
  50% { transform: rotate(180deg) translateY(0); }
  75% { transform: rotate(270deg) translateY(-10px); }
}

/* Recurso sendo adicionado */
@keyframes resource-fly-in {
  0% {
    transform: translateY(-50px) scale(0.5);
    opacity: 0;
  }
  50% {
    transform: translateY(-25px) scale(1.2);
    opacity: 1;
  }
  100% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

/* Hex√°gono produzindo */
@keyframes hex-pulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7);
  }
  50% {
    box-shadow: 0 0 20px 10px rgba(255, 255, 255, 0);
  }
}

/* Constru√ß√£o sendo colocada */
@keyframes building-appear {
  0% {
    transform: scale(0) rotate(-180deg);
    opacity: 0;
  }
  50% {
    transform: scale(1.2) rotate(10deg);
  }
  100% {
    transform: scale(1) rotate(0);
    opacity: 1;
  }
}

/* Ladr√£o se movendo */
@keyframes robber-move {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-20px);
  }
}

/* Destaque de posi√ß√£o v√°lida */
@keyframes valid-position-pulse {
  0%, 100% {
    opacity: 0.7;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.1);
  }
}

/* Toast notification */
@keyframes toast-slide-in {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}
```

### Aplicando Anima√ß√µes

```typescript
// Componente de Hex√°gono com produ√ß√£o
const Hexagon = ({ isProducing, resource }) => {
  return (
    <div 
      className={cn(
        "hexagon",
        isProducing && "animate-[hex-pulse_1s_ease-in-out]"
      )}
    >
      {/* conte√∫do */}
    </div>
  );
};

// Componente de recurso sendo adicionado
const ResourceCard = ({ isNew }) => {
  return (
    <div
      className={cn(
        "resource-card",
        isNew && "animate-[resource-fly-in_0.5s_ease-out]"
      )}
    >
      {/* conte√∫do */}
    </div>
  );
};
```

---

## üîå Integra√ß√£o Socket.io

### Setup do Cliente

```typescript
// lib/socket.ts
import { io, Socket } from 'socket.io-client';

let socket: Socket | null = null;

export const initSocket = (gameId: string) => {
  if (socket) return socket;
  
  socket = io(process.env.NEXT_PUBLIC_SOCKET_URL!, {
    query: { gameId },
    transports: ['websocket'],
  });
  
  return socket;
};

export const getSocket = () => {
  if (!socket) throw new Error('Socket not initialized');
  return socket;
};
```

### Hook de Socket

```typescript
// hooks/useSocket.ts
import { useEffect, useState } from 'react';
import { initSocket } from '@/lib/socket';

export const useSocket = (gameId: string) => {
  const [socket, setSocket] = useState<Socket | null>(null);
  const [isConnected, setIsConnected] = useState(false);
  
  useEffect(() => {
    const s = initSocket(gameId);
    setSocket(s);
    
    s.on('connect', () => setIsConnected(true));
    s.on('disconnect', () => setIsConnected(false));
    
    return () => {
      s.disconnect();
    };
  }, [gameId]);
  
  return { socket, isConnected };
};
```

### Eventos do Jogo

```typescript
// hooks/useGame.ts
export const useGame = (gameId: string) => {
  const { socket } = useSocket(gameId);
  const [gameState, setGameState] = useState<GameState | null>(null);
  
  useEffect(() => {
    if (!socket) return;
    
    // Receber estado inicial
    socket.on('game:state', (state: GameState) => {
      setGameState(state);
    });
    
    // Dados rolados
    socket.on('dice:rolled', ({ player, result }) => {
      // Animar dados
      // Distribuir recursos
    });
    
    // Constru√ß√£o realizada
    socket.on('building:placed', ({ player, building, position }) => {
      // Animar constru√ß√£o
      // Atualizar tabuleiro
    });
    
    // Troca realizada
    socket.on('trade:completed', ({ player, offer, receive }) => {
      // Atualizar recursos
    });
    
    // Ladr√£o movido
    socket.on('robber:moved', ({ player, position, stolenFrom }) => {
      // Animar ladr√£o
    });
    
    // Turno mudou
    socket.on('turn:changed', ({ currentPlayer }) => {
      // Atualizar indicador de turno
    });
    
    return () => {
      socket.off('game:state');
      socket.off('dice:rolled');
      socket.off('building:placed');
      socket.off('trade:completed');
      socket.off('robber:moved');
      socket.off('turn:changed');
    };
  }, [socket]);
  
  // A√ß√µes
  const rollDice = () => socket?.emit('dice:roll');
  const buildRoad = (position: Position) => socket?.emit('building:place', { type: 'road', position });
  const tradeWithBank = (offer: Resources, receive: Resources) => 
    socket?.emit('trade:bank', { offer, receive });
  
  return {
    gameState,
    rollDice,
    buildRoad,
    tradeWithBank,
  };
};
```

---

## üß™ Testes e Valida√ß√£o

### Checklist de Testes Manuais

#### Fase de Rolagem
- [ ] Bot√£o "Rolar Dados" habilitado apenas no in√≠cio do turno
- [ ] Anima√ß√£o de dados funciona corretamente
- [ ] Recursos distribu√≠dos conforme n√∫meros rolados
- [ ] N√∫meros 6 e 8 destacados em vermelho
- [ ] Resultado 7 ativa fase do ladr√£o

#### Constru√ß√£o
- [ ] Bot√µes desabilitados quando recursos insuficientes
- [ ] Tooltip mostra recursos faltantes
- [ ] Modo de constru√ß√£o destaca posi√ß√µes v√°lidas
- [ ] Clicar em posi√ß√£o inv√°lida n√£o faz nada
- [ ] Confirma√ß√£o antes de construir
- [ ] Anima√ß√£o de constru√ß√£o aparece
- [ ] Recursos deduzidos ap√≥s constru√ß√£o

#### Troca com Banco
- [ ] Taxa de c√¢mbio correta (4:1, 3:1, 2:1)
- [ ] Valida√ß√£o em tempo real
- [ ] Confirma√ß√£o necess√°ria
- [ ] Recursos atualizados ap√≥s troca

#### Cartas de Desenvolvimento
- [ ] N√£o pode jogar no turno da compra
- [ ] Cavaleiro move ladr√£o
- [ ] Monop√≥lio coleta recursos corretos
- [ ] Cartas de ponto de vit√≥ria ocultas dos outros

#### UI/UX
- [ ] Hover em bot√µes mostra feedback
- [ ] Toast notifications aparecem
- [ ] Pain√©is de advers√°rios atualizados
- [ ] Indicador de turno vis√≠vel
- [ ] Sem lag nas anima√ß√µes

---

## üì¶ Depend√™ncias e Integra√ß√µes

### Radix UI - Configura√ß√£o

```typescript
// components/ui/button.tsx
import { forwardRef } from 'react';
import { cn } from '@/lib/utils';

interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'default' | 'primary' | 'danger' | 'ghost';
  size?: 'sm' | 'md' | 'lg';
}

export const Button = forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant = 'default', size = 'md', ...props }, ref) => {
    return (
      <button
        ref={ref}
        className={cn(
          'rounded-lg font-medium transition-all',
          'hover:scale-105 active:scale-95',
          'disabled:opacity-50 disabled:cursor-not-allowed',
          {
            'bg-ui-surface text-white hover:bg-ui-primary': variant === 'default',
            'bg-ui-accent text-white hover:bg-opacity-90': variant === 'primary',
            'bg-state-error text-white hover:bg-opacity-90': variant === 'danger',
            'bg-transparent hover:bg-ui-surface': variant === 'ghost',
          },
          {
            'px-3 py-1.5 text-sm': size === 'sm',
            'px-4 py-2 text-base': size === 'md',
            'px-6 py-3 text-lg': size === 'lg',
          },
          className
        )}
        {...props}
      />
    );
  }
);
```

### Supabase - Configura√ß√£o

```typescript
// lib/supabase.ts
import { createClient } from '@supabase/supabase-js';

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;

export const supabase = createClient(supabaseUrl, supabaseAnonKey);

// Autentica√ß√£o
export const signIn = async (email: string, password: string) => {
  const { data, error } = await supabase.auth.signInWithPassword({
    email,
    password,
  });
  return { data, error };
};

export const signUp = async (email: string, password: string) => {
  const { data, error } = await supabase.auth.signUp({
    email,
    password,
  });
  return { data, error };
};

export const signOut = async () => {
  const { error } = await supabase.auth.signOut();
  return { error };
};
```

---

## üöÄ Scripts de Desenvolvimento

### Comandos Dispon√≠veis

```bash
# Desenvolvimento
npm run dev          # Inicia servidor de desenvolvimento

# Build
npm run build        # Build de produ√ß√£o
npm run start        # Inicia servidor de produ√ß√£o

# Linting
npm run lint         # Verifica c√≥digo com ESLint

# Limpeza
npm run clean        # Remove pasta .next
```

### Vari√°veis de Ambiente

```env
# .env.local
NEXT_PUBLIC_SOCKET_URL=http://localhost:3001
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_key
```

---

## üìù Padr√µes de C√≥digo

### Nomenclatura

```typescript
// Componentes: PascalCase
export const GameBoard = () => { };

// Hooks: camelCase com prefixo 'use'
export const useGameState = () => { };

// Constantes: UPPER_SNAKE_CASE
export const MAX_PLAYERS = 4;

// Fun√ß√µes utilit√°rias: camelCase
export const calculateTradeRate = () => { };

// Tipos/Interfaces: PascalCase
export interface GameState { }
export type PlayerColor = 'red' | 'blue' | 'white' | 'orange';
```

### Estrutura de Componentes

```typescript
// 1. Imports
import { useState } from 'react';
import { cn } from '@/lib/utils';

// 2. Types
interface ComponentProps {
  prop1: string;
  prop2?: number;
}

// 3. Component
export const Component = ({ prop1, prop2 }: ComponentProps) => {
  // 3.1 Hooks
  const [state, setState] = useState(false);
  
  // 3.2 Handlers
  const handleClick = () => {
    setState(true);
  };
  
  // 3.3 Render helpers
  const renderContent = () => {
    return <div>Content</div>;
  };
  
  // 3.4 Render
  return (
    <div className="component">
      {renderContent()}
    </div>
  );
};
```

---

## üéØ Roadmap de Implementa√ß√£o

### Sprint 1: Estrutura Base (Semana 1-2)
- [ ] Setup do projeto Next.js
- [ ] Configura√ß√£o Tailwind CSS
- [ ] Componentes UI base (Button, Dialog, etc)
- [ ] Estrutura de pastas
- [ ] Configura√ß√£o Socket.io
- [ ] P√°gina de login/registro

### Sprint 2: Tabuleiro (Semana 3-4)
- [ ] Componente GameBoard
- [ ] Renderiza√ß√£o de hex√°gonos
- [ ] N√∫meros de produ√ß√£o
- [ ] Portos
- [ ] Grid de posicionamento
- [ ] Responsividade do tabuleiro

### Sprint 3: Sistema de Dados e Recursos (Semana 5)
- [ ] Componente DiceRoller
- [ ] Anima√ß√£o de dados
- [ ] Distribui√ß√£o de recursos
- [ ] Componente ResourceCards
- [ ] Sistema de notifica√ß√µes (Toast)

### Sprint 4: Constru√ß√£o (Semana 6-7)
- [ ] Componente ConstructionMenu
- [ ] Valida√ß√£o de recursos
- [ ] Modo de posicionamento
- [ ] Destaque de posi√ß√µes v√°lidas
- [ ] Anima√ß√µes de constru√ß√£o
- [ ] Componentes Road, Settlement, City

### Sprint 5: Troca com Banco (Semana 8)
- [ ] Modal BankTradeModal
- [ ] L√≥gica de taxa de c√¢mbio
- [ ] Valida√ß√£o de troca
- [ ] Confirma√ß√£o e execu√ß√£o

### Sprint 6: Cartas de Desenvolvimento (Semana 9)
- [ ] Componente DevelopmentCards
- [ ] Compra de cartas
- [ ] Uso de cartas (Cavaleiro, Progresso)
- [ ] Sistema de ladr√£o
- [ ] Maior ex√©rcito

### Sprint 7: Pain√©is de Jogadores (Semana 10)
- [ ] Componente PlayerPanel
- [ ] Componente OpponentCard
- [ ] Indicador de turno
- [ ] Maior estrada
- [ ] Pontos de vit√≥ria

### Sprint 8: Polish e Testes (Semana 11-12)
- [ ] Refinamento de anima√ß√µes
- [ ] Testes de usabilidade
- [ ] Corre√ß√£o de bugs
- [ ] Otimiza√ß√£o de performance
- [ ] Documenta√ß√£o final

---

## üêõ Troubleshooting Comum

### Problema: Hex√°gonos n√£o renderizam corretamente
**Solu√ß√£o:** Verificar CSS grid e aspect-ratio dos hex√°gonos

### Problema: Socket n√£o conecta
**Solu√ß√£o:** Verificar URL do servidor e vari√°vel de ambiente

### Problema: Anima√ß√µes com lag
**Solu√ß√£o:** Usar `will-change` CSS e React.memo para componentes

### Problema: Valida√ß√µes n√£o funcionam
**Solu√ß√£o:** Verificar sincroniza√ß√£o de estado entre cliente e servidor

---

## üìö Recursos e Refer√™ncias

### Documenta√ß√£o
- [Next.js Docs](https://nextjs.org/docs)
- [React 19 Docs](https://react.dev)
- [Tailwind CSS](https://tailwindcss.com/docs)
- [Radix UI](https://www.radix-ui.com/primitives)
- [Socket.io Client](https://socket.io/docs/v4/client-api/)

### Design Inspiration
- [Colonist.io](https://colonist.io) - Refer√™ncia de UI
- [Board Game Arena](https://boardgamearena.com) - Experi√™ncia multiplayer

### Regras do Catan
- [Regras Oficiais PDF](https://www.catan.com/understand-catan/game-rules)

---

## ‚úÖ Crit√©rios de Sucesso

### UX/UI
- ‚úÖ Jogador entende o que pode fazer a cada momento
- ‚úÖ Feedback visual para todas as a√ß√µes
- ‚úÖ Sem a√ß√µes inv√°lidas poss√≠veis
- ‚úÖ Anima√ß√µes fluidas (<100ms de delay)

### Funcionalidade
- ‚úÖ 100% das regras do Catan implementadas
- ‚úÖ Multiplayer real-time funcional
- ‚úÖ Zero crashes durante partida normal
- ‚úÖ Estado do jogo sempre sincronizado

### Performance
- ‚úÖ First Contentful Paint < 1.5s
- ‚úÖ 60 FPS nas anima√ß√µes
- ‚úÖ Lat√™ncia de rede < 100ms

---

**√öltima atualiza√ß√£o:** 2025-10-31  
**Vers√£o do documento:** 1.0.0  
**Mantido por:** @catan-mvp/web team